<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>搜尋班機</title>    
		<link rel="stylesheet" type="text/css" href="statics/css/search.css" />
    	<link rel="stylesheet" type="text/css" href="statics/css/footer.css">
		<link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
		<script src="statics/js/jquery-3.4.1.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

	</head>
	<body>
		<div class ="row">
    		<div class="col-sm-8">
        		<nav class="navbar navbar-expand-lg navbar-light navbar-trans">
					<a class="navbar-brand" href="#">
						<img src="statics/img/SA_mark.jpg" alt="Logo" style="width: 200px" />
      				</a>
      				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      					<span class="navbar-toggler-icon"></span>
      				</button>
     				<div class="collapse navbar-collapse" id="navbarSupportedContent">
        				<ul class="navbar-nav ml-auto">
				        	<li class="nav-item active">
		                		<a class="nav-link" href="index.html">首頁 <span class="sr-only">(current)</span></a>
		                	</li>
		                	<li class="nav-item active">
		                		<a class="nav-link" href="member_home.html">會員專區</a>
		               	 	</li>
		                	<li class="nav-item active">
		                		<a class="nav-link " href="home.html">最新消息</a>
		                	</li>
		                	<li class="nav-item active">
		                		<a class="nav-link " href="search.html">查詢班機</a>
		                	</li>
          					<form class="form-inline my-2 my-lg-0">		
          	  					<i class="fas fa-user"> </i>
            					<span class="navbar-text mr-sm-2">  Hi,**會員姓名！ </span>
          					</form>
        				</ul>
      				</div>
    			</nav>
    
			    <div style="margin-left:150px;margin-top: 60px;" style="background-color: aqua;">
			      	<p class="fs-2 slogan">床 以 外 的 地 方，</p>
			      	<p class="fs-2 slogan"> &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;都 是 遠 方</p>
			     	<p class="name" style="text-align: center;">- SA 創辦人 Sarah Chang</span>
			    </div>

			     <div class="card" style="padding-left:10px;border-color:black;border-radius:10px;margin-left:120px;margin-top:80px;padding-bottom:30px;margin-bottom:50px;width: 30rem;">
			     	<form>
				    	<ul class="list-group list-group-flush" style="border-color:white">
				         	<li class="list-group-item" style="border-color:white;">
				           		<br/><span style="font-size:14pt">出 發 地</span><br/>
				             	<select class="a-select" id="departure_airport" >
				             		<option value="">請選擇出發地</option>
				               		<option value="桃園國際機場">台北 - 桃園國際機場(TPE)</option>
				               		<option value="約翰甘迺迪國際機場">紐約 - 約翰甘迺迪國際機場(JFK)</option>
				               		<option value="仁川國際機場">首爾 - 仁川國際機場(ICN)</option>
				               		<option value="成田國際機場">東京 - 成田國際機場(DRT)</option>
				               		<option value="廊曼國際機場">曼谷 - 廊曼國際機場(DMK)</option>
				               		<option value="倫敦希斯洛機場">倫敦 - 倫敦希斯洛機場（LHR)</option>
								</select>
							</li>
							<li class="list-group-item" style="border-color:white;">
           						<span style="font-size:14pt">目 的 地</span><br/>
             					<select  class="a-select" id="arrive_airport" >
             						<option value="">請選擇出發地</option>
               						<option value="桃園國際機場">台北 - 桃園國際機場(TPE)</option>
				               		<option value="約翰甘迺迪國際機場">紐約 - 約翰甘迺迪國際機場(JFK)</option>
				               		<option value="仁川國際機場">首爾 - 仁川國際機場(ICN)</option>
				               		<option value="成田國際機場">東京 - 成田國際機場(DRT)</option>
				               		<option value="廊曼國際機場">曼谷 - 廊曼國際機場(DMK)</option>
				               		<option value="倫敦希斯洛機場">倫敦 - 倫敦希斯洛機場（LHR)</option>
								</select>
          					</li>
       					</ul>
      					<div class="containter">
         					<div class="row">
           						<div class="col-sm">
             						<li class="list-group-item" style="border-color:white;font-size:14pt">
               							出 發 日 期<br/>
               							<input id="date" type="date" style="padding-left:10px;margin-top:10px;border-color:white;width:165px; height:40px;border:1px solid ;border-radius: 5px;">
            						</li>
           						</div>
           						<div class="col-sm">
             						<li class="list-group-item"style="border-color:white;" >
               							<span style="font-size:14pt">乘 客 人 數</span><br/>
                						<select id="passenger" style="font-size:14pt;width:165px;margin-top:10px;height:40px;border:1px solid ;border-radius: 5px;padding-left:10px">
		   									<option value="" selected>請選擇</option>
		    								<option value="1">1</option>
		    								<option value="2">2</option>
		    								<option value="3">3</option>
		    								<option value="4">4</option>
		 								</select>
              						</li> 
          						</div>
        					</div>
         					<div class="col-sm text-center">
             						<button type="button" class="btn" id="submit" style="height:40px;border:1px solid ;padding-top:1px;height:40px;margin-top:30px;font-size: 18pt;color:white; background-color:orange;">查詢</button>
         
           					</div>
         				</div>
       				</div>
    			</div> 
    			<div class="col-sm-4">
      				<img class="cloud-picture"src="statics/img/cloud background.png" >
    			</div>
  			</div>
  		</div>
  		<div class="footer">
	        <div class="main-footer">
	            <div class="container2">
	                <div class="footer-contact">
	                    <div class="ti">
	                        <h1 style="display:inline;" class="s">Super</h1>
	                        <h1 style="display:inline;" class="a">Airline</h1>
	                        <h1 style="display:inline;" class="c">開發團隊</h1>
	                    </div>
	
	                    <h4>連絡電話: 09-12852254</h4>
	                    <h4>E-mail: superair@gmail.com</h4>
	                    <div class="linker">
	                        <i class="fa fa-facebook-square fa-2x" aria-hidden="true"></i>
	                        <i class="fa fa-instagram fa-2x" aria-hidden="true"></i>
	                        <i class="fa fa-google fa-2x" aria-hidden="true"></i>
	                        <i class="fa fa-linkedin-square fa-2x" aria-hidden="true"></i>
	                    </div>
	                </div>
	                <div class="footer-item">
	                    <h4>會員</h4>
	                    <nav>
	                        <a href="member_home.html">會員專區</a>
	                        <a href="login.html">會員登入</a>
	                    </nav>
	                </div>
	                <div class="footer-item">
	                    <h4>訂票</h4>
	                    <nav>
	                        <a href="search.html">搜尋班機</a>
	                    </nav>
	                </div>
	                <div class="footer-item">
	                    <h4>資訊</h4>
	                    <nav>
	                        <a href="home.html">最新消息</a>
	                    </nav>
	                </div>
	            </div>
	            <div class="copyright">
	                Copyright &copy; 2020 superairline開發團隊 All Rights Reserved. 隱私權政策 使用條款
	            </div>
	        </div>
    	</div>
	</body>
	<script type="text/javascript">
	$(document).ready(function() {
		// 處理表單點擊事件
	    var $form = $('#submit');
	    $form.click(function() {
	        alert("hi");
	        search();
	        
	    });
	    
	    function search(){
	    	var d_airport = $('#departure_airport').val();
		  	var a_airport= $('#arrive_airport').val();
        	var d_date=$('#date').val();
	 	    var num_passenger=$('#passenger').val();
	  	  
	  	    if(d_airport==""){
	  			alert("尚未選擇出發地");
	  	    }
	  	    else if(a_airport==""){
	  		   	alert("尚未選擇目的地");
	  	    }
	  	    else if(d_date==""){
	  		  	alert("尚未選擇出發日期");
	  	    }
	  	    else if(num_passenger==""){
	  		  	alert("尚未選擇乘客人數");
	  	    } 
	  	  	else{
				var data_object = {
			    	"departure_airport":d_airport,
			    	"departure_date":d_date,
					"arrive_airport":a_airport,
					"num_passenger":num_passenger
	             	};
			    var data_string = JSON.stringify(data_object);
			    console.log(data_string);
		    	  // 發出POST的AJAX請求
		          $.ajax({
		                  type: "POST",
		                  url: "api/plane.do",
		                  data: data_string,
		                  crossDomain: true,
		                  cache: false,
		                  dataType: 'json',
		                  timeout: 200000,
		                  success: function (response) {
		                      if(response.status == 200){
		                    	  
		                    	  localStorage.setItem("result",JSON.stringify(response.response.data));
		                    	  localStorage.setItem("row",response.response.row);
		                    	  localStorage.setItem("num_of_passenger",num_passenger);
		                    	  localStorage.setItem("d_data",JSON.stringify(response.response.d_airport));
		                    	  localStorage.setItem("a_data",JSON.stringify(response.response.a_airport));
		                    	  
		                     	  location.replace("search_result.html");
		                      		
		                      }
		                  },
		                  error: function (jqXHR,textStatus,errorThrown) {
		                      alert("無法連線到伺服器！");
		                      console.log(jqXHR);
		                      console.log(textStatus);
		                      console.log(errorThrown);
		                  }
			  	});
			    
	  	 	 }
	    }
	});
	</script>
</html>
