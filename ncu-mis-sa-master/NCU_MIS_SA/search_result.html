<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>搜尋班機結果</title>
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous"/>
    <link rel="stylesheet" type="text/css" href="statics/css/search.css" />
    <link rel="stylesheet" type="text/css" href="statics/css/footer.css">
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
    <style type="text/css"></style>
  </head>
  <body >
    <div class="row" style="margin-bottom:50px">
      <div class="col-sm-8">
        <nav class="navbar navbar-expand-lg navbar-light navbar-trans">
          <a class="navbar-brand" href="#">
              <img src="statics/img/SA_mark.jpg" alt="Logo" style="width: 200px" />
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item active">
	             <a class="nav-link" href="index.html">首頁 <span class="sr-only">(current)</span></a>
             </li>
            <li class="nav-item active">
            	<a class="nav-link" href="member_home.html">會員專區</a>
           	 </li>
             <li class="nav-item active">
             	<a class="nav-link " href="home.html">最新消息</a>
             </li>
             <li class="nav-item active">
             	<a class="nav-link " href="search.html">查詢班機</a>
             </li>
             <form class="form-inline my-2 my-lg-0">
                <i class="fas fa-user"> </i>
                <span class="navbar-text mr-sm-2">  Hi,**會員姓名！ </span>
              </form>
            </ul>
          </div>
        </nav>

        <div class="card border-white mt-10 mb-3" id="airport" style="width:45rem;margin-left:30px;margin-top:30px"></div>

        <div class="row border-white" style="margin-left:50px;">
          <div class="btn-group"  role="group" aria-label="Basic example">
            <button class="btn shadow rounded" style="width:22rem;background-color:orange;" type="button" aria-expanded="false">
              詳細資訊
            </button>
            <button type="button" class="btn shadow rounded" style="margin-left:12px;margin-right:12px;width:10rem;color:white;background-color:rgb(125, 171, 202)">經濟艙</button>
            <button type="button" class="btn shadow rounded" style="margin-left:12px;margin-right:12px;width:10rem;color:white;background-color:rgb(24, 56, 71)">商務艙</button>
            <button type="button" class="btn shadow rounded" style="margin-left:12px;margin-right:12px;width:10rem;color:white;background-color:rgb(20, 41, 59)">頭等艙</button>
          </div>
        </div>

        <div class="overflow-auto" id="outer" style="width:62rem;height:450px;margin-top:30px;padding-right:10px ;">
        </div>
        <div class="row justify-content-between" style="padding-left: 70px;padding-top:40px">
          <div class="col-sm-4" style="padding-left:50px">
            <button onclick="history.back()"type="button" class="btn shadow rounded" style="width:10rem;border-color:orange;color:orange;background-color:white">上一步</button>
          </div>
        </div>
      </div> 
      <div class="col-sm-4">
        <img class="cloud-picture"src="statics/img/cloud background.png" >
      </div>
    </div>
    <div class="footer">
        <div class="main-footer">
            <div class="container2">
                <div class="footer-contact">
                    <div class="ti">
                        <h1 style="display:inline;" class="s">Super</h1>
                        <h1 style="display:inline;" class="a">Airline</h1>
                        <h1 style="display:inline;" class="c">開發團隊</h1>
                    </div>

                    <h4>連絡電話: 09-12852254</h4>
                    <h4>E-mail: superair@gmail.com</h4>
                    <div class="linker">
                        <i class="fa fa-facebook-square fa-2x" aria-hidden="true"></i>
                        <i class="fa fa-instagram fa-2x" aria-hidden="true"></i>
                        <i class="fa fa-google fa-2x" aria-hidden="true"></i>
                        <i class="fa fa-linkedin-square fa-2x" aria-hidden="true"></i>
                    </div>
                </div>
                 <div class="footer-item">
	                    <h4>會員</h4>
	                    <nav>
	                        <a href="member_home.html">會員專區</a>
	                        <a href="login.html">會員登入</a>
	                    </nav>
	                </div>
	                <div class="footer-item">
	                    <h4>訂票</h4>
	                    <nav>
	                        <a href="search.html">搜尋班機</a>
	                    </nav>
	                </div>
	                <div class="footer-item">
	                    <h4>資訊</h4>
	                    <nav>
	                        <a href="home.html">最新消息</a>
	                    </nav>
	                </div>
            </div>
            <div class="copyright">
                Copyright &copy; 2020 superairline開發團隊 All Rights Reserved. 隱私權政策 使用條款
            </div>
        </div>
    </div>
  </body>
  <script type="text/javascript">
  $(document).ready(function(){
	  
	  

		  row= localStorage.getItem("row");
		  data=JSON.parse(localStorage.getItem("result"));
		  a_data=JSON.parse(localStorage.getItem("a_data"));
		  d_data=JSON.parse(localStorage.getItem("d_data"));
		  
		  
		  innerHTML='';
		  var outer = '';
		  for(i=0;i<row;i++){
	          outer += addHTML(innerHTML,i);
	        	
			  }
      	$("#outer").append(outer);
      	innerHTML='';
      	$('#airport').append(addAirportHTML(innerHTML,'0'));
		  }
		  
	  );
  
  function addAirportHTML(inner,i){
	  inner+='<ul class="list-group list-group-horizontal" style="border-color:white">';
	  inner+='<li class="list-group-item">';
	  inner+='<span class="place-name">'+d_data[0].city_name_in_chinese+' - <br/>'+data[i].departure_airport+'('+d_data[0].city_name+')</span>';
	  inner+='<span  class="airport-name"></span></li>';
      inner+=' <li class="list-group-item">';
	  inner+=' <i class="fas fa-plane fa-3x" style="color:deepSkyBlue"></i></li>';
      inner+='<li class="list-group-item">';
      inner+=' <span class="place-name">'+a_data[0].city_name_in_chinese+' - <br/>'+data[i].arrive_airport+'('+a_data[0].city_name+')</span>';
	  inner+=' <span class="airport-name"></span></li></ul>';
	  
	  return inner;
  }
  function addHTML(inner,i){
	  inner+= '<div class="card" id="plane_info" style="padding-bottom:20px;margin-top:30px;margin-left:50px;width:57rem;background-color:rgb(146, 204, 231)">';
	  inner+= '<div class="row" style="height:150px;padding-top:20px;padding-bottom:20px;padding-left:30px;padding-right:30px">';
	  inner+= '<div class="col-sm-5">';
	  inner+='<h5><span style="color:white;">'+data[i].departure_time+'&emsp; </span><span style="color:secondary " >'+d_data[0].city_name_in_chinese+' - '+data[i].departure_airport+'('+d_data[0].city_name+')</span><br/>';
	  inner+='&emsp;<i class="fas fa-sm fa-caret-down" style="color:white"></i><br/>';
	  inner+='<span style="color:white">'+data[i].arrive_time+'&emsp; </span><span style="color:secondary " >'+a_data[0].city_name_in_chinese+' - '+data[i].arrive_airport+'('+a_data[0].city_name+')</span>';
	  inner+='<h5>飛行時間：14hr50m</h5>';
	  inner+='<p>'+data[i].plane_no+'</p></div>';
	  inner+='<button type="button" onclick="next('+i+',id)" id="3" class="btn shadow col-sm rounded  money-card"> ';
	  inner+='<p>TWD</p>';
	  inner+='<h4>'+data[i].price1+'</h4></button>';
	  inner+='<button type="button" onclick="next('+i+',id)"id="2" class="btn shadow col-sm rounded  money-card">';
	  inner+='<p>TWD</p>';
	  inner+='<h4>'+data[i].price2+'</h4></button>';
	  inner+='<button type="button" onclick="next('+i+',id)" id="1"class="btn shadow col-sm rounded  money-card">';
	  inner+='<p>TWD</p>';
	  inner+='<h4>'+data[i].price3+'</h4></button></div></div></div>';
	  
	  return inner;
  }
  
  function next(i,seat_class){
	  if (seat_class==3){
		  setLocalStorage(i);
		  localStorage.setItem("price",data[i].price1);
	  }else if(seat_class==2){
		  setLocalStorage(i);
		  localStorage.setItem("price",data[i].price2);
	  }else if(seat_class==3){
		  setLocalStorage(i);
		  localStorage.setItem("price",data[i].price3);
	  }
 	  location.replace("passenger_info.html");
  }
  
  function setLocalStorage(i){

	  data=JSON.parse(localStorage.getItem("result"));
	  a_data=JSON.parse(localStorage.getItem("a_data"));
	  d_data=JSON.parse(localStorage.getItem("d_data"));
	  
	  localStorage.setItem("dep_date",data[0].departure_date);
	  localStorage.setItem("dep_time",data[i].departure_time);
	  localStorage.setItem("dep_airport",data[i].departure_airport);
	  localStorage.setItem("dep_city",d_data[0].city_name_in_chinese);

	  localStorage.setItem("arr_date",data[0].arrive_date);
	  localStorage.setItem("arr_time",data[i].arrive_time);
	  localStorage.setItem("arr_airport",data[i].arrive_airport);
	  localStorage.setItem("arr_city",a_data[0].city_name_in_chinese);
	  
	  
  }
  </script>

</html>
