<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>登入會員</title>
        <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="statics/css/login.css" />
        <link href="statics/css/bootstrap.min.css" rel="stylesheet">
         <script src="statics/js/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
        <script src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
        <style type="text/css"></style>
      </head>
<body>
    <div class="background-pic">
        <img src="statics/img/removebg-mark.png" alt="Logo" style="width: 200px" />
        <div class="login-container text-secondary" >
            
                <div class="left">
                    <h4>非 Super Air 會員 ? </h4><br/>
                    
                    <a href="register.html" class="signup"style="text-decoration:none;color:#fff;background-color:rgb(72, 201, 194);">立即加入會員</a><br/><br/><br/>
                </div>
                <form class="right" >
                    <h4>Super Air 會員登入</h4><br/>
                    <p>帳號</p>
                    <input class="inp" id="email">
                    <p><br/>密碼</p>
                    <input class="inp" type="password" id="password">
                    <a href="#" style="margin-top:20px;color:grey;">忘記密碼?</a>
                    <div class="btn-group" role="group" aria-label="Basic example">
                        <button type="button" id="login-button" class="btn" style=" color:orange;">登入
                          <i class="fas fa-arrow-circle-right fa-sm" style="color:orange"></i>
                        </button>
                      </div>
                    </form>
            
        </div>
    </div> 

</body>
    <script type="text/javascript">
        $(document).ready(function () {
          
            // 登入
            $('#login-button').click(function () {
                let request = {
                    'email': $('#email').val(),
                    'password': $('#password').val(),
                };

                let data_string = JSON.stringify(request);

                $.ajax({
                    type: "POST",
                    url: "api/Loginout.do",
                    crossDomain: true,
                    data: data_string,
                    cache: false,
                    dataType: 'json',
                    timeout: 5000,
                    success: function (response) {
                        if (response.status == 200) {
                            alert('登入成功');
                            location.reload();
                        } else if (response.status = 401) {
                            alert('帳號密碼錯誤');
                            $('#email').text('');
                            $('#password').text('');
                        }
                        console.log(response);
                        window.location.replace("home.html");
                    },
                    error: function (jqXHR, exception) {
                        var msg = '';
                        if (jqXHR.status === 0) {
                            msg = 'Not connect.\n Verify Network.';
                        } else if (jqXHR.status == 404) {
                            msg = 'Requested page not found. [404]';
                        } else if (jqXHR.status == 500) {
                            msg = 'Internal Server Error [500].';
                        } else if (exception === 'parsererror') {
                            msg = 'Requested JSON parse failed.';
                        } else if (exception === 'timeout') {
                            msg = 'Time out error.';
                        } else if (exception === 'abort') {
                            msg = 'Ajax request aborted.';
                        } else {
                            msg = 'Uncaught Error.\n' + jqXHR.responseText;
                        }
                        alert(msg);
                    },
                });
            })

        });
    </script>